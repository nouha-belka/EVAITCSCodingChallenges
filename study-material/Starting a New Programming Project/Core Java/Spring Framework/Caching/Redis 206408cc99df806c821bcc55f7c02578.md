# Redis

# Understanding Redis

Redis (Remote Dictionary Server) is an open-source, in-memory data structure store that can be used as a database, cache, message broker, and queue.

## Key Features of Redis

- **In-memory storage:** All data is stored in RAM for fast access
- **Data structures:** Supports strings, hashes, lists, sets, sorted sets, bitmaps, and more
- **Persistence:** Optional disk storage for data durability
- **Replication:** Master-slave architecture for high availability
- **Atomic operations:** Ensures data consistency in multi-step operations

## Common Redis Use Cases

- **Caching:** Store frequently accessed data
- **Session management:** Store user session data
- **Real-time analytics:** Track metrics and counters
- **Queue management:** Handle job queues and message passing

## Basic Redis Commands

```bash
# String operations
SET key value
GET key
DEL key

# List operations
LPUSH list value
RPUSH list value
LRANGE list start stop

# Hash operations
HSET hash field value
HGET hash field
HGETALL hash

# Set operations
SADD set member
SMEMBERS set
SISMEMBER set member

```

## Spring Boot Redis Setup

First, add the Redis dependency to your pom.xml:

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>

```

Configure Redis connection in application.properties:

```
spring.redis.host=localhost
spring.redis.port=6379

```

Create a Redis configuration class:

```java
@Configuration
public class RedisConfig {
    @Bean
    public LettuceConnectionFactory redisConnectionFactory() {
        return new LettuceConnectionFactory();
    }

    @Bean
    public RedisTemplate<String, Object> redisTemplate() {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(redisConnectionFactory());
        template.setKeySerializer(new StringRedisSerializer());
        template.setValueSerializer(new GenericJackson2JsonRedisSerializer());
        return template;
    }
}

```

## Example Usage in Spring Boot

```java
@Service
public class UserService {
    @Autowired
    private RedisTemplate<String, User> redisTemplate;
    
    public void saveUser(User user) {
        redisTemplate.opsForValue().set("user:" + user.getId(), user);
    }
    
    public User getUser(String id) {
        return redisTemplate.opsForValue().get("user:" + id);
    }
}

```

## Common Interview Questions

- What is Redis persistence and what options are available?
    
    Redis offers two persistence options:
    1. RDB (Redis Database): Takes point-in-time snapshots of your dataset
    2. AOF (Append Only File): Logs every write operation for replay on restart
    
- How does Redis handle concurrency?
    
    Redis is single-threaded, which means all commands are executed sequentially. This eliminates the need for complex locking mechanisms and ensures atomic operations. For scalability, Redis uses I/O multiplexing.
    
- What are Redis data eviction policies?
    
    Redis supports several eviction policies:
    - noeviction: Return errors when memory is full
    - allkeys-lru: Remove least recently used keys
    - volatile-lru: Remove least recently used keys with expire field set
    - allkeys-random: Remove random keys
    - volatile-random: Remove random keys with expire field set
    - volatile-ttl: Remove keys with nearest expiration time
    

## Best Practices

- **Key naming conventions:** Use colon-separated format like "object:id:field"
- **Memory management:** Set appropriate maxmemory and eviction policies
- **Monitoring:** Use Redis INFO command to track performance metrics
- **Security:** Enable authentication and use SSL for remote connections

Remember that Redis is primarily an in-memory database, so always consider memory constraints and implement appropriate backup strategies when using it in production.